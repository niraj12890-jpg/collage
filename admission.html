<form id="admissionForm">
  <div class="mb-3">
    <label for="name">Full Name</label>
    <input type="text" class="form-control" id="name" required>
  </div>
  <div class="mb-3">
    <label for="dob">Date of Birth</label>
    <input type="date" class="form-control" id="dob" required>
  </div>
  <div class="mb-3">
    <label for="mobile">Mobile Number</label>
    <input type="tel" class="form-control" id="mobile" required>
  </div>
  <div class="mb-3">
    <label for="classSelect">Class</label>
    <select class="form-control" id="classSelect" required>
      <option value="">Select Class</option>
      <option value="11">11</option>
      <option value="12">12</option>
    </select>
  </div>
  <button type="submit" class="btn btn-primary">
    Submit <span id="spinner" style="display:none;">‚è≥</span>
  </button>
</form>

<p>Total Students Registered: <span id="totalStudents">0</span></p>

<script>
const admissionForm = document.getElementById("admissionForm");
const spinner = document.getElementById("spinner");
const totalStudents = document.getElementById("totalStudents");
const scriptURL = 'PASTE_YOUR_WEB_APP_URL_HERE';

// Load live total students
fetch(scriptURL+'?count=1')
  .then(res=>res.text())
  .then(count=> totalStudents.textContent=count);

admissionForm.addEventListener("submit", e=>{
  e.preventDefault();
  spinner.style.display='inline';
  const data = {
    name: document.getElementById('name').value,
    dob: document.getElementById('dob').value,
    mobile: document.getElementById('mobile').value,
    class: document.getElementById('classSelect').value
  };
  fetch(scriptURL,{
    method:'POST',
    body: JSON.stringify(data)
  }).then(res=>res.json())
    .then(resp=>{
      spinner.style.display='none';
      alert('Registration successful! Your number: '+resp.regNo);
      admissionForm.reset();
      fetch(scriptURL+'?count=1')
        .then(r=>r.text())
        .then(c=> totalStudents.textContent=c);
    })
    .catch(err=>{
      spinner.style.display='none';
      alert('Error submitting form. Try again.');
    });
});
</script>
